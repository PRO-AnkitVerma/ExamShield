

{% block main %}
<div class="view-result">

    <div class="jumbotron my-4">

  <form class="form" autocomplete="off" onsubmit="return saveAns()"  action="/student/calculate-marks">
    <h1 style="text-align: center;">{{course.course_name}}</h1>
    {% for q in questions%}
    <h3 class="text-info">{{ forloop.counter }}. {{q.question}}</h3><h4 style="text-align: right;">[Marks {{q.marks}}]</h4>


          <div class="form-check mx-4">
            <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{q.option1}}" value="Option1">
            <label class="form-check-label" for="option1">
              {{q.option1}}
            </label>
          </div>


          <div class="form-check mx-4">
            <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{q.option2}}" value="Option2">
            <label class="form-check-label" for="option2">
              {{q.option2}}
            </label>
          </div>


          <div class="form-check mx-4">
            <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{q.option3}}" value="Option3">
            <label class="form-check-label" for="option3">
              {{q.option3}}
            </label>
          </div>


          <div class="form-check mx-4">
            <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{q.option4}}" value="Option4">
            <label class="form-check-label" for="option4">
              {{q.option4}}
            </label>
          </div>

        {% endfor %}
        <input class="btn btn-info btn-lg"   type="submit" value="Submit">
    </form>
  </div>

<script> 
    function saveAns(){
        var ele = document.getElementsByTagName('input'); 
        for(i = 0; i < ele.length; i++) { 
            if(ele[i].type="radio") { 
                if(ele[i].checked){        
                  setCookie(ele[i].name,ele[i].value,3)
                }
            }
        }
    }

    function setCookie(cname, cvalue, exdays) {
  var d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  var expires = "expires="+ d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

</script>

<br><br><br><br><br><br> -->
{% endblock main %}
{% block scripts %}
<script type="text/javascript">
document.getElementById('1').style.display= 'inherit';

      var a=1;
      if(a==1)
      {

          document.getElementById('previous').style.display = "none";
      }

      function next(){
          if(a!={{total_questions}})
          {
          document.getElementById(a).style.display="none";
          a++;
          document.getElementById(a).style.display="inherit";

          document.getElementById('previous').style.display = "block";
          }
          if(a=={{total_questions}})
          {
              document.getElementById('next').style.display='none';
              document.getElementById('submit').style.display='block';

          }
      }
      function pre(){
          if(a!=1)
          {
          document.getElementById(a).style.display="none";
          a--;
          document.getElementById(a).style.display="inherit";
          document.getElementById('next').style.display="block";
          document.getElementById('submit').style.display="none";
          }
          if(a==1)
          {
              document.getElementById('previous').style.display = "none";
          }
      }
      var h = document.getElementById('hour');
      var m = document.getElementById('minute');
      var s = document.getElementById('second');
      var hour = "00";
      var min = '01';
      var sec = "00";

     var timer = setInterval(function(){


      if(sec==0)
      {
          if(min=="01"){
              min = "00";
              sec = 60;

          }
          else if(min=="00")
          {
              min="00";
              if(hour=="00")
              {
                  min="00";
              }
              else
              {
                  hour--;
                  if(hour <=9)
                  {
                      hour = '0'+hour;
                  }
                  min="59";
                  sec=60;
              }
          }
          else{
              min--;
              if(min <=9)
              {
                  min= '0'+min;
              }
              sec = 60;
          }
      }
      else
      {
          sec--;
          if(sec <="9")
          {
              sec = '0'+sec;
          }
      }

      if(hour==0 && min==0 && sec<=40 && sec>=0)
      {
          h.style.color = "red";
          m.style.color = "red";
          s.style.color = "red";


      }
      if(hour==0 && min==0 && sec==0)
      {
          swal("Timeout","If you not submit then OK ,It automatically submited!","error");
          document.getElementById('clear').style.display = 'none';
          document.getElementById('msg').style.display = 'block';
          clearInterval(timer);
      }

      h.innerHTML = hour;
      m.innerHTML = min;
      s.innerHTML = sec;
     },1000);


     let video = document.getElementById('video');
      let model;
      const setupCamera = () => {
          navigator.mediaDevices.getUserMedia({
              video:{width:120,height:70},
              audio:false
          }).then(stream=>{
              video.srcObject = stream;
          });
      }

      const faceDetection = async ()=>{
          const predictions = await model.estimateFaces(video,true);
          console.log(predictions);
      }

      setupCamera();
      video.addEventListener('loadeddata',async ()=>{
      model = await blazeface.load();
      setInterval(faceDetection,100);
      });

      </script>

{% endblock %}